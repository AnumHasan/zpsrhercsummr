<mvc:View controllerName="zpsrhercsummr.controller.zpsrhercsummr"
    xmlns:mvc="sap.ui.core.mvc" 
    xmlns="sap.m"
    xmlns:l="sap.ui.layout"
    xmlns:f="sap.ui.layout.form"
    xmlns:core="sap.ui.core"
    displayBlock="true">
    
    <Page id="page" title="PSR Hierarchy Summary Report">
        <content>
            <!-- Search Panel -->
            <Panel headerText="Search Filters" class="sapUiResponsiveMargin">
                <f:SimpleForm id="searchForm"
                    editable="true"
                    layout="ResponsiveGridLayout"
                    labelSpanXL="3"
                    labelSpanL="3"
                    labelSpanM="3"
                    labelSpanS="12"
                    adjustLabelSpan="false"
                    emptySpanXL="4"
                    emptySpanL="4"
                    emptySpanM="4"
                    emptySpanS="0"
                    columnsXL="1"
                    columnsL="1"
                    columnsM="1"
                    singleContainerFullSize="false">
                    <f:content>
                    <!-- Sale Org -->
                    <Label text="Sale Org" />
                    <ComboBox 
                        selectedKey="{filterModel>/SALESORG}"
                        filterSecondaryValues="true"
                        items="{dataModel>/allSalesOrgs}">
                        <core:Item key="{dataModel>SALESORG}" text="{dataModel>SALESORG}" />
                    </ComboBox>

                    <!-- RSM -->
                    <Label text="RSM" />
                    <ComboBox 
                        selectedKey="{filterModel>/RSM}"
                        filterSecondaryValues="true"
                        items="{dataModel>/allRSMs}">
                        <core:Item key="{dataModel>RSM}" text="{dataModel>RSM}" />
                    </ComboBox>

                    <!-- TDM -->
                    <Label text="TDM" />
                    <ComboBox 
                        selectedKey="{filterModel>/TDM}"
                        filterSecondaryValues="true"
                        items="{dataModel>/allTDMs}">
                        <core:Item key="{dataModel>TDM}" text="{dataModel>TDM}" />
                    </ComboBox>

                    <!-- ADR -->
                    <Label text="ADR" />
                    <ComboBox 
                        selectedKey="{filterModel>/ADR}"
                        filterSecondaryValues="true"
                        items="{dataModel>/allADRs}">
                        <core:Item key="{dataModel>ADR}" text="{dataModel>ADR}" />
                    </ComboBox>

                      <!-- buttons     -->
                        <Label text="" />
                        <Toolbar width="93%" class="sapUiSmallMarginBegin sapUiSmallMarginEnd">
                            <Button text="Search" 
                                type="Emphasized"
                                press=".onSearch"
                                icon="sap-icon://search" />

                            <ToolbarSpacer />

                            <Button text="Export to PDF" 
                                type="Success"
                                press=".onExportToPDF"
                                icon="sap-icon://pdf-attachment" />
                        </Toolbar>
                
                    </f:content>
                </f:SimpleForm>
            </Panel>

            <!-- Results Section -->
            <Panel headerText="Results" class="sapUiResponsiveMargin">
                <content>
                    <VBox items="{dataModel>/PSRData}">
                        <Panel headerText="{dataModel>ADR}" 
                            class="sapUiSmallMarginBottom"
                            expandable="true"
                            expanded="true">
                            <content>
                                <VBox class="sapUiSmallMargin">
                                    <!-- <Text text="RSM: {dataModel>RSM}" class="sapUiTinyMarginBottom"/>
                                    <Text text="TDM: {dataModel>TDM}" class="sapUiTinyMarginBottom"/> -->
                                    <Text text="Data loaded - Export to PDF to view formatted report" 
                                        class="sapUiSmallMarginTop"/>
                                </VBox>
                            </content>
                        </Panel>
                    </VBox>
                </content>
            </Panel>
        </content>
    </Page>
</mvc:View>


